image: mcr.microsoft.com/dotnet/sdk:6.0

variables:
  DOTNET_ENVIRONMENT: "Test"

stages:
  - test

test_job:
  stage: test
  script:
    - echo "Setting up the environment..."
    - export PATH="$PATH:$HOME/.dotnet/tools"
    - dotnet restore
    - dotnet test TestProject.sln --filter "FullyQualifiedName~TestProject.e2e" --logger "trx;LogFileName=test-results.trx"
  artifacts:
    when: always
    paths:
      - test-results.trx
